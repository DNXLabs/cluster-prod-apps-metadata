# Deployment values for argocd-apps
# Only add here the components that should be deployed into every cluster environment
argocd:
  namespace: argocd
  project: default
  appNameSuffix: ''
source:
  repoURL: https://github.com/DNXLabs/cluster-prod-apps-metadata.git
  targetRevision: master
destination:
  cluster: https://kubernetes.default.svc
syncPolicy: {prune: true, selfHeal: true} # auto-sync enabled

apps:
  poc-application-blueprint:
    project: default
    namespace: prod
    path: charts/poc-application-blueprint
    helm_parameters:
      service.type: NodePort
      service.port: "80"
      # image.tag: v0.0.1
      ingress.enabled: "true"
      ingress.annotations.kubernetes\.io\/ingress\.class: alb
      ingress.annotations.alb\.ingress\.kubernetes\.io\/group\.name: prod-apps
      # ingress.annotations.alb\.ingress\.kubernetes\.io\/certificate-arn: "arn:aws:acm:us-east-2:xxxxxxxxx:certificate/5e9fdef7-1f94-x-x-e7a2e4f97515"
      ingress.annotations.alb\.ingress\.kubernetes\.io\/listen-ports: '[{"HTTP": 80}, {"HTTPS":443}]'
      ingress.annotations.alb\.ingress\.kubernetes\.io\/ssl-redirect: '443'
      ingress.annotations.alb\.ingress\.kubernetes\.io\/target-type: instance
      ingress.annotations.alb\.ingress\.kubernetes\.io\/success-codes: "200"
      ingress.annotations.alb\.ingress\.kubernetes\.io\/healthcheck-path: /
      ingress.annotations.alb\.ingress\.kubernetes\.io\/group\.order: "100"
      # ingress.hosts[0].host: blueprint.dnx.solution
      # ingress.hosts[0].paths[0]: "/"
      revisionHistoryLimit: "2"